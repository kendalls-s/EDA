---
title: "Taller de Análisis Exploratorio de Datos (EDA)"
author: "Kendall Solano y Andrey Calderon"
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: true
    toc_depth: '3'
  html_document:
    toc: true
    toc_float: true
    toc_depth: 3
    theme: cosmo
    highlight: tango
    code_folding: show
    number_sections: true
subtitle: Predicción del Rendimiento Académico Estudiantil
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  warning = FALSE,
  message = FALSE,
  fig.width = 10,
  fig.height = 6,
  fig.align = 'center'
)
```

# Introducción al Taller

## Objetivo General

En este taller práctico, se trabajará con un conjunto de datos real que contiene registros académicos de 2000 estudiantes. El objetivo es realizar un **Análisis Exploratorio de Datos (EDA)** utilizando R Studio, desde la importación de datos hasta la construcción de un modelo de regresión lineal simple.

## ¿Qué es el EDA?

El **Análisis Exploratorio de Datos (EDA)** es el proceso de examinar y resumir las características principales de un conjunto de datos. Sus objetivos son:

- Comprender la estructura y contenido de los datos
- Detectar errores, valores faltantes o atípicos
- Calcular estadísticas descriptivas (media, mediana, moda, etc.)
- Visualizar patrones mediante gráficos
- Verificar supuestos estadísticos (como la normalidad)
- Identificar relaciones entre variables

---

# Configuración del Entorno

```{r librerias}
# Instalar paquetes si es necesario (descomentar si es primera vez)
# install.packages("ggplot2")
# install.packages("dplyr")
# install.packages("corrplot")
# install.packages("reshape2")

# Cargar librerías
library(ggplot2)
library(dplyr)
library(corrplot)
library(reshape2)

# Mostrar números sin notación científica
options(scipen = 999)
```

## Importar el Dataset

```{r importar}
# Importar el dataset
# NOTA: Ajustar la ruta según la ubicación del archivo
datos <- read.csv("D://kenda//Downloads//Calificaciones.csv")

# Verificar que se cargó correctamente
cat("El dataset tiene", nrow(datos), "filas y", ncol(datos), "columnas\n")
```

**Respuesta:**

- Número de filas: `r nrow(datos)`
- Número de columnas: `r ncol(datos)`

---

# Exploración Inicial de los Datos

## Primeras y Últimas Filas

```{r exploracion}
# Ver las primeras 6 filas
head(datos)

# Ver las últimas 6 filas
tail(datos)
```

## Estructura del Dataset

```{r estructura}
# Ver estructura: tipos de variables
str(datos)

# Ver nombres de las columnas
names(datos)
```
**Respuesta:**

1. Variables numericas: 6

2. Variables de texto: 1

## Resumen Estadístico

```{r resumen}
# Resumen de todas las variables
summary(datos)
```

---

**Respuesta:**

Minimo: 25

Maximo: 100

Mediana: 65

Media: 64.86


# Limpieza y Preparación de Datos

## Renombrar Columnas

```{r renombrar}
# Ver nombres actuales
names(datos)

# Renombrar las columnas a español
colnames(datos) <- c(
  "ID",                  # Student_ID
  "Asistencia",         # Attendance (%)
  "Examen_Interno_1",   # Internal Test 1 (out of 40)
  "Examen_Interno_2",   # Internal Test 2 (out of 40)
  "Promedio_Tareas",    # Assignment Score (out of 10)
  "Horas_Estudio",      # Daily Study Hours
  "Nota_Final"          # Final Exam Marks (out of 100)
)

# Verificar los nuevos nombres
names(datos)
```

## Verificar Valores Faltantes

```{r valores_faltantes}
# Contar valores NA en cada columna
colSums(is.na(datos))

# Total de valores faltantes
cat("Total de valores faltantes:", sum(is.na(datos)), "\n")
```

**Respuesta:** ¿Existen valores faltantes? `r ifelse(sum(is.na(datos)) == 0, "No", "Sí")`

---

# Estadística Descriptiva: Nota del Examen Final

## Medidas de Tendencia Central

```{r tendencia_central}
# MEDIA (promedio)
media <- mean(datos$Nota_Final)
cat("Media:", round(media, 2), "\n")

# MEDIANA (valor central)
mediana <- median(datos$Nota_Final)
cat("Mediana:", round(mediana, 2), "\n")

# MODA (valor más frecuente)
tabla_freq <- table(round(datos$Nota_Final, 0))
moda <- as.numeric(names(tabla_freq)[which.max(tabla_freq)])
cat("Moda:", moda, "\n")
```

**Resumen:**

- Media: `r round(media, 2)`
- Mediana: `r round(mediana, 2)`
- Moda: `r moda`

## Medidas de Dispersión

```{r medidas_dispersion}
# VARIANZA
varianza <- var(datos$Nota_Final)
cat("Varianza:", round(varianza, 2), "\n")

# DESVIACIÓN ESTÁNDAR
desv_est <- sd(datos$Nota_Final)
cat("Desviación Estándar:", round(desv_est, 2), "\n")

# CUARTILES
cuartiles <- quantile(datos$Nota_Final, probs = c(0.25, 0.50, 0.75))
cat("Q1 (25%):", round(cuartiles[1], 2), "\n")
cat("Q2 (50%):", round(cuartiles[2], 2), "\n")
cat("Q3 (75%):", round(cuartiles[3], 2), "\n")

# RANGO
rango <- max(datos$Nota_Final) - min(datos$Nota_Final)
cat("Rango:", round(rango, 2), "\n")
```

**Resumen:**

- Varianza: 128.62
- Desviacion Estandar: 11.34
- Cuartiles: Q1=58   Q2=65   Q3=73  
- Rango: 75

---

# Visualización de Datos

## Gráfico de Pastel: Categorías de Rendimiento

```{r grafico_pastel}
# Crear categorías de rendimiento
datos$Rendimiento <- cut(datos$Nota_Final,
  breaks = c(0, 60, 70, 80, 90, 100),
  labels = c("Reprobado", "Suficiente", "Bueno", "Muy Bueno", "Excelente"),
  include.lowest = TRUE
)

# Contar estudiantes por categoría
frecuencias <- table(datos$Rendimiento)
porcentajes <- round(prop.table(frecuencias) * 100, 1)

# Crear etiquetas con porcentajes
etiquetas <- paste(names(frecuencias), "\n", porcentajes, "%", sep = "")

# Definir colores
colores <- c("#FF6B6B", "#FFA94D", "#FFD93D", "#6BCB77", "#4D96FF")

# Crear gráfico de pastel
pie(frecuencias,
    labels = etiquetas,
    col = colores,
    main = "Distribución del Rendimiento Académico")
```
**Resumen:**

- ¿Cual es la categoria con mas estudiantes? Suficiente
- ¿Que porcentaje de estudiantes reprobo? 33.8%



## Diagrama de Barras: Nivel de Asistencia

```{r barras_asistencia}
# 7.2 Diagrama de barras horizontales: nivel de asistencia
datos$Nivel_Asistencia <- cut(
  datos$Asistencia,
  breaks = c(0, 60, 75, 90, 100),
  labels = c("Bajo", "Regular", "Bueno", "Excelente"),
  include.lowest = TRUE
)

# Tabla de frecuencias por nivel
freq_asistencia <- table(datos$Nivel_Asistencia)

# ---- GRÁFICO ----
barplot(
  freq_asistencia,
  horiz = TRUE,
  col   = c("#FF6B6B", "#FFA94D", "#6BCB77", "#4D96FF"),
  main  = "Estudiantes por Nivel de Asistencia",
  xlab  = "Número de Estudiantes",
  ylab  = "Nivel de Asistencia",
  las   = 1
)

cat("\nFrecuencias por nivel de asistencia:\n")
print(freq_asistencia)
```

**Respuestas:**

- ¿Cuantos estudiantes tienen asistencia “Excelente”? 486
- ¿Cual nivel de asistencia tiene menos estudiantes? Bajo con 5


## Diagrama de Cajas: Exámenes Internos

```{r boxplot_examenes}
# Crear diagrama de cajas
boxplot(datos$Examen_Interno_1, datos$Examen_Interno_2,
        names = c("Examen Interno 1", "Examen Interno 2"),
        col = c("#4D96FF", "#6BCB77"),
        main = "Comparación de Exámenes Internos",
        ylab = "Calificación (0-100)",
        border = "darkblue")

# Agregar línea de la media
abline(h = mean(datos$Examen_Interno_1), col = "red", lty = 2)

# Estadísticas
cat("=== EXAMEN INTERNO 1 ===\n")
cat("Media:", round(mean(datos$Examen_Interno_1), 2), "\n")
cat("Mediana:", round(median(datos$Examen_Interno_1), 2), "\n")
cat("Desv. Est.:", round(sd(datos$Examen_Interno_1), 2), "\n\n")

cat("=== EXAMEN INTERNO 2 ===\n")
cat("Media:", round(mean(datos$Examen_Interno_2), 2), "\n")
cat("Mediana:", round(median(datos$Examen_Interno_2), 2), "\n")
cat("Desv. Est.:", round(sd(datos$Examen_Interno_2), 2), "\n")
```

**Respuestas:**

- Examen con mediana mas alta: Examen Interno 2
- Examen con mayor dispersion: Examen Interno 1
- ¿Existen valores atipicos? Si 2 en examen interno 1 y 1 en exament interno 2

## Gráfico de Violín: Nota Final por Nivel de Asistencia

```{r violin_asistencia}
ggplot(datos, aes(x = Nivel_Asistencia, y = Nota_Final, fill = Nivel_Asistencia)) +
  geom_violin(trim = FALSE, alpha = 0.7) +
  geom_boxplot(width = 0.15, fill = "white") +
  scale_fill_manual(values = c("#FF6B6B", "#FFA94D", "#6BCB77", "#4D96FF")) +
  labs(
    title = "Distribución de Nota Final por Nivel de Asistencia",
    x = "Nivel de Asistencia",
    y = "Nota del Examen Final"
  ) +
  theme_minimal() +
  theme(legend.position = "none")
```

**Respuestas**
- Nivel con notas mas altas: Exelente
- Diferencias en las distribuciones: Los estudiantes con mejores notas contiene mejores notas, nos da a entedenter que hay una correlacion positiva
---

# Análisis de Normalidad

## Histograma con Curva Normal

```{r histograma_normal}
# Crear histograma
hist(datos$Nota_Final,
     breaks = 20,
     col = "#4D96FF",
     border = "white",
     main = "Histograma de Nota Final",
     xlab = "Nota del Examen Final",
     ylab = "Frecuencia",
     freq = FALSE)

# Agregar curva normal teórica
curve(dnorm(x, mean = mean(datos$Nota_Final), sd = sd(datos$Nota_Final)),
      add = TRUE,
      col = "red",
      lwd = 2)

# Agregar leyenda
legend("topright",
       legend = "Curva Normal",
       col = "red",
       lwd = 2)
```

**Respuestas**
- ¿El histograma tiene forma de campana? Si
- ¿La distribucion parece simetrica o sesgada? Sesgada a la derecha ya que su centro es en 60


## Gráfico Q-Q

```{r qq_plot}
# Crear gráfico Q-Q
qqnorm(datos$Nota_Final,
       main = "Gráfico Q-Q: Nota Final",
       xlab = "Cuantiles Teóricos",
       ylab = "Cuantiles de los Datos",
       col = "#4D96FF",
       pch = 19,
       cex = 0.6)

# Agregar línea de referencia
qqline(datos$Nota_Final, col = "red", lwd = 2)
```

**Respuestas**

- ¿Los puntos siguen la linea roja? Si
- ¿Existen desviaciones en los extremos? Si pero una muy leve al final

## Pruebas Estadísticas de Normalidad

```{r pruebas_normalidad}
# Prueba de Shapiro-Wilk
shapiro_test <- shapiro.test(datos$Nota_Final)

cat("=== PRUEBA DE SHAPIRO-WILK ===\n")
cat("Estadístico W:", round(shapiro_test$statistic, 4), "\n")
cat("Valor p:", shapiro_test$p.value, "\n")

if(shapiro_test$p.value > 0.05) {
  cat("Conclusión: Los datos SON NORMALES (p > 0.05)\n\n")
} else {
  cat("Conclusión: Los datos NO SON NORMALES (p <= 0.05)\n\n")
}

# Prueba de Kolmogorov-Smirnov
datos_std <- (datos$Nota_Final - mean(datos$Nota_Final)) / sd(datos$Nota_Final)
ks_test <- ks.test(datos_std, "pnorm")

cat("=== PRUEBA DE KOLMOGOROV-SMIRNOV ===\n")
cat("Estadístico D:", round(ks_test$statistic, 4), "\n")
cat("Valor p:", ks_test$p.value, "\n")

if(ks_test$p.value > 0.05) {
  cat("Conclusión: Los datos SON NORMALES (p > 0.05)\n")
} else {
  cat("Conclusión: Los datos NO SON NORMALES (p <= 0.05)\n")
}
```

**Respuesta**

- Prueba de Shapiro-Wilk:
Valor p =  0.0002190907 Conclusion:  NO SON NORMALES
- Prueba de Kolmogorov-Smirnov:
Valor p =  0.06953239 Conclusion:  SON NORMALES
- ¿Los datos de Nota Final son normales? Segun la prueba Shapiro-Wilk no lo son pero segun Smirnov si

---

# Análisis de Correlación

## Mapa de Calor de Correlaciones

```{r mapa_calor}
# Seleccionar solo variables numéricas
vars_numericas <- datos[, c("Asistencia", "Examen_Interno_1",
                            "Examen_Interno_2", "Promedio_Tareas",
                            "Horas_Estudio", "Nota_Final")]

# Calcular matriz de correlación
matriz_cor <- cor(vars_numericas)

# Mostrar la matriz
round(matriz_cor, 2)

############################################################
# --- 9.1 HEATMAP ---
############################################################

heatmap(
  matriz_cor,
  col = colorRampPalette(c("#4D96FF", "white", "#FF6B6B"))(20),
  symm = TRUE,
  main = "Mapa de Calor - Correlaciones"
)

############################################################
# --- HEATMAP CON GGPLOT ---
############################################################

library(reshape2)
library(ggplot2)

# Convertir matriz a formato largo
matriz_largo <- melt(matriz_cor)
colnames(matriz_largo) <- c("Variable1", "Variable2", "Correlacion")

ggplot(matriz_largo, aes(x = Variable1, y = Variable2, fill = Correlacion)) +
  geom_tile(color = "white") +
  geom_text(aes(label = round(Correlacion, 2)), size = 3) +
  scale_fill_gradient2(
    low = "#4D96FF",
    mid = "white",
    high = "#FF6B6B",
    midpoint = 0,
    limit = c(-1, 1)
  ) +
  labs(
    title = "Mapa de Calor - Matriz de Correlaciones",
    x = "",
    y = ""
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```
**Respuestas:**

- Variables con correlacion mas fuerte: Nota final y asistecia con R= 0,726
- ¿Existe correlacion negativa? No, no existe ninguna correlación negativa
- Variable mas correlacionada con Nota Final:  Asistencia con r = 0.726


##Grafico violin
```{r violin}
ggplot(datos, aes(x = Nivel_Asistencia, y = Nota_Final, fill = Nivel_Asistencia)) +
  geom_violin(trim = FALSE, alpha = 0.7) +
  geom_boxplot(width = 0.15, fill = "white") +
  scale_fill_manual(values = c("#FF6B6B", "#FFA94D", "#6BCB77", "#4D96FF")) +
  labs(
    title = "Distribución de Nota Final por Nivel de Asistencia",
    x = "Nivel de Asistencia",
    y = "Nota del Examen Final"
  ) +
  theme_minimal() +
  theme(legend.position = "none")
```


**Respuestas:**

- Nivel con distribucion mas concentrada: Excelente

- Nivel con notas mas altas: Excelente

- Conclusion sobre asistencia y rendimiento:A mayor asistencia, mayor es la nota final promedio.
     El nivel 'Excelente' muestra las notas más altas y menor variabilidad.
     Esto indica una relación positiva entre asistencia y rendimiento académico.

# Analisis de correlacion
## Mapa de calor
```{r m_10}
############################################################
# --- 9+.1 MAPA DE CALOR DE CORRELACIONES ---
############################################################

# Seleccionar variables numéricas
vars_numericas <- datos[, c(
  "Asistencia",
  "Examen_Interno_1",
  "Examen_Interno_2",
  "Promedio_Tareas",
  "Horas_Estudio",
  "Nota_Final"
)]

# Matriz de correlación
matriz_cor <- cor(vars_numericas)

# Mostrar matriz redondeada
round(matriz_cor, 2)

# Mapa de calor con corrplot
corrplot(
  matriz_cor,
  method = "color",
  type = "upper",
  addCoef.col = "black",
  number.cex = 0.7,
  tl.col = "black",
  tl.srt = 45,
  col = colorRampPalette(c("#FF6B6B", "white", "#4D96FF"))(100),
  title = "Mapa de Calor - Correlaciones",
  mar = c(0, 0, 2, 0)
)
```
**Respuestas:**

- Variables con correlacion mas alta:
Examen_Interno_2 con Promedio_Tareas (r ≈ 0.54)
Asistencia ↔ Nota_Final como la más fuerte. (r ≈ 0.73)

- ¿Existe correlacion negativa?  No, ninguna de las variables tiene correlación negativa.

- Variable mas correlacionada con Nota Final: Asistencia (r ≈ 0.73)


## Gráfico de Dispersión: Asistencia vs Nota Final

```{r grafico_dispersion}
# Crear gráfico de dispersión
plot(datos$Asistencia, datos$Nota_Final,
     main = "Relación entre Asistencia y Nota Final",
     xlab = "Porcentaje de Asistencia",
     ylab = "Nota del Examen Final",
     col = "#4D96FF",
     pch = 19,
     cex = 0.7)

# Agregar línea de tendencia
abline(lm(Nota_Final ~ Asistencia, data = datos),
       col = "red",
       lwd = 2)
```

## Correlación de Pearson

```{r correlacion_pearson}
# Calcular correlación
correlacion <- cor(datos$Asistencia, datos$Nota_Final)
cat("Coeficiente de correlación (r):", round(correlacion, 4), "\n")

# Prueba de significancia
prueba_cor <- cor.test(datos$Asistencia, datos$Nota_Final)
cat("Valor p:", prueba_cor$p.value, "\n")

if(prueba_cor$p.value < 0.05) {
  cat("La correlación ES estadísticamente significativa\n")
} else {
  cat("La correlación NO es significativa\n")
}
```
**Respuestas:**

- Coeficiente r = 0.7256 

- Valor p = 0

- Tipo de correlacion (fuerte/moderada/debil): Fuerte 

- ¿Es significativa? (Si / No): Si


---

# Regresión Lineal Simple

## Crear el Modelo

```{r modelo_regresion}
# Crear modelo
modelo <- lm(Nota_Final ~ Asistencia, data = datos)

# Ver resumen
summary(modelo)
```

## Interpretar Resultados

```{r interpretar_modelo}
# Obtener coeficientes
intercepto <- coef(modelo)[1]
pendiente <- coef(modelo)[2]

cat("=== ECUACIÓN DEL MODELO ===\n")
cat("Nota_Final =", round(intercepto, 2), "+", 
    round(pendiente, 2), "* Asistencia\n\n")

# Coeficiente de determinación R²
r_cuadrado <- summary(modelo)$r.squared
cat("R cuadrado (R²):", round(r_cuadrado, 4), "\n")
cat("La Asistencia explica el", round(r_cuadrado * 100, 1), 
    "% de la variabilidad en la Nota Final\n")
```
**respuestas:**

- Nota_Final = -25.19 + 1.06 × Asistencia

- R² = 0.5266

- Interpretación: La Asistencia explica el 52.7% de la variabilidad en la nota final.

## Visualizar el Modelo

```{r visualizar_modelo}
ggplot(datos, aes(x = Asistencia, y = Nota_Final)) +
  geom_point(color = "#4D96FF", alpha = 0.5) +
  geom_smooth(method = "lm", color = "red", se = TRUE) +
  labs(
    title = "Regresión Lineal: Nota Final vs Asistencia",
    subtitle = paste("R² =", round(r_cuadrado, 4)),
    x = "Porcentaje de Asistencia",
    y = "Nota del Examen Final"
  ) +
  theme_minimal()
```

## Realizar Predicciones

```{r predicciones}
# Crear datos para predicción
nuevos_datos <- data.frame(Asistencia = c(60, 70, 80, 85, 90, 100))

# Realizar predicciones
predicciones <- predict(modelo, newdata = nuevos_datos)

# Mostrar resultados
cat("=== PREDICCIONES ===\n")
for(i in 1:length(nuevos_datos$Asistencia)) {
  cat("Asistencia:", nuevos_datos$Asistencia[i], 
      "% -> Nota predicha:", round(predicciones[i], 1), "\n")
}
```
**respuesta:**

- Nota Final predicha = 65

---

# Conclusiones

## Resumen de Hallazgos

1. **Promedio de Nota Final:** `r round(mean(datos$Nota_Final), 2)` puntos

2. **Normalidad:** Los datos `r ifelse(shapiro_test$p.value > 0.05, "SÍ", "NO")` siguen una distribución normal según la prueba de Shapiro-Wilk (p = `r round(shapiro_test$p.value, 4)`). Además, el histograma mostró asimetría (sesgo a la derecha) y no tiene la forma de campana perfecta. El Q-Q plot también muestra desviaciones importantes en las colas.


3. **Correlación:** Existe una correlación `r ifelse(correlacion > 0.7, "fuerte", ifelse(correlacion > 0.4, "moderada", "débil"))` (r = `r round(correlacion, 4)`) entre Asistencia y Nota Final, que `r ifelse(prueba_cor$p.value < 0.05, "ES", "NO ES")` estadísticamente significativa

4. **Modelo de Regresión:** La asistencia explica el `r round(r_cuadrado * 100, 1)`% de la variabilidad en la nota final. Por cada punto porcentual adicional de asistencia, la nota final aumenta aproximadamente `r round(pendiente, 2)` puntos


## Recomendaciones

Basándose en el análisis realizado:

- La asistencia a clases tiene un impacto significativo en el rendimiento académico
- Se recomienda mantener un nivel de asistencia superior al 80% para optimizar el rendimiento
- Los estudiantes deben ser conscientes de que cada clase a la que asisten contribuye positivamente a su nota final
